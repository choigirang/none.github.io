---
title: "React 54장 - 프로젝트 (3)"
excerpt: "쿠키를 설정해서 사용하자"

categories: React
tags: [React, 리액트, cookie, session, jwt]

toc: true
toc_sticky: true

date: 2023-08-09
last_modified_at: 2023-08-09
---

# React

## createContext

- 쿠키를 리코일에 담아 전역적으로 사용하는 방법도 봤지만 `createContext`를 활용한 방법에 대한 작성이다.
- 마찬가지로 전역적인 상태나 데이터를 관리하기 위해 사용되는 함수로, 데이터를 공유하거나 프로퍼티를 전달하지 않고 컴포넌트 간에 값을 주고받을 수 있다고 한다.
- 컴포넌트 트리의 어떤 깊이에서든 해당 컨텍스트의 값을 읽거나 업데이트 할 수 있다.

```js
// type
export interface AuthContextProps {
  token: string | undefined;
  setToken: (token: string) => void;
  removeToken: () => void;
}

const AuthContext =
  (createContext < AuthContextProps) | (undefined > undefined);
```

- 우선 본인은 쿠키에 대한 전역 사용을 할 것이기 때문에 쿠키에 대한 타입만 정의한다.
- 다른 Context 값을 만들어서 필요한 값을 목적에 맞게 작성하면 되겠다.

## AuthProvider

- `React-cookie`를 사용할 것이다.
- `useCookies`에 대한 구조는 다음에 더 까보도록 하자

```js
function AuthProvider({ children }: { children: React.Node }) {
  const [cookies, setCookie, removeCookie] = useCookies(["token"]);

  const setToken = (token: string) => {
    setCookie("token", token, { path: "/" });
  };

  const removeToken = () => {
    removeCookie("token", { path: "/" });
  };

  const authContextValue: AuthContextProps = {
    token: cookies.token,
    setToken,
    removeToken,
  };

  return <AuthContext.Provider value={authContextValue} />;
}
```
