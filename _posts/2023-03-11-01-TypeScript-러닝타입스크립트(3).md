---
title:  "TypeScript 3장 - 러닝 타입스크립트(3)"
excerpt: "러닝 타입스크립트 part.1의 chapter.2까지"

categories: TypeScript
tags: [타입스크립트, TypeScript, 타입시스템, 문서화, 컴파일, 자바스크립트, 애너테이션 ]

toc: true
toc_sticky: true
 
date: 2023-03-11
last_modified_at: 2023-03-11
---
# TypeScript

![image](https://user-images.githubusercontent.com/118104644/222047360-4f48f5be-c478-4d62-b23e-8c77e933d674.png){: .center}

## Part.2
### chapter.5
#### 5.1 함수 매개변수
- 함수의 매개변수 또한 타입을 선언할 수 있다.
- 타입을 선언하지 않은 매개변수는 any타입으로 간주되어 무엇이든 될 수 있다.
  ```ts
  function sing(song){
    console.log(`Singing: ${song}`);
  }
  // 선언되지 않은 매개변수
  function sing(song: string){
    console.log(`Singing: ${song}`);
  }
  ```

##### 5.1.1 필수 매개변수
- 타입스크립트는 함수에 선언된 모든 매개변수가 필수라고 가정한다.
- 함수가 잘못된 수의 인수로 호출되면,타입스크립트는 타입 오류의 형태로 이의를 제기합니다.
  ```ts
  function singTwo(first: string, second: string){
    console.log(`${first}/${second}`);
  }

  singTwo("Ball");
  // Error: Expected 2 arguments, but got 1.

  singTwo("Ball", "play") // OK
  singTwo("Ball", "play", "friedns")
  // Error: Expected 2 arguments, but got 3.
  ```

##### 5.1.2 선택적 매개변수
- 함수 매개변수를 의도적으로 제공하지 않아 의도적으로 undefined를 사용할 수도 있다.
- 선택적 객체 타입 속성과 유사하게 타입 애너테이션의 : 앞에 ?를 추가해 매개변수가 선택적이라고 표시한다.
- 함수 호출에 선택적 매개변수를 제공할 필요는 없다.
- 선택적 매개변수에는 항상 | undefined가 유니언 타입으로 추가되어 있다.
  ```ts
  function Sing(song: string, singer?: string){
    console.log(`Song ${song}`);

    if(singer){
        console.log(`Singer ${singer}`);
    }
  }

  Sing("Any"); // OK
  Sing("Any",undefined); // OK
  Sing("Any", "Mary"); // OK
  ```


- 선택적 매개변수는 암묵적으로 undefined가 될 수 있다.
- 선택적 매개변수는 값이 undefined일지라도 항상 재공되어야 한다.
  ```ts
  function Sing(song: string, singer: string|undefined){
    console.log(`Song ${song} ${singer}`);
  }

  Sing("Any", undefined); // OK
  Sing("Any");
  // Error: Expected 2 arguments, but got 1.
  ```


- 모든 선택적 매개변수는 마지막 매개변수여야 한다.
- 필수 매개변수 전에 선택적 매개변수가 먼저 온다면 오류가 발생한다.
  ```ts
  function Sing(song: string, singer?: string){
    ...
  } // OK

  function Song(song?: string, singer: string){
    ...
  }// Error: A required parameter cannot follow an optional parameter.
  ```

##### 5.1.3 기본 매개변수
- 선택적 매개변수에는 기본적으로 값이 제공되기 때문에 해당 타입스크립트 타입에는 암묵적으로 함수 내부에 `| undefined` 유니언 타입이 추가된다.
- 함수의 매개변수에 대해 인수를 누락하거나 undefined 인수를 사용해서 호출하는 것을 허용한다.
- `=`는 암묵적으로 |undefined가 추가된다.
  ```ts
  function Sing(song: string, list = 0){
    ...
  } // list는 number|undefined

  Sing("Any"); // OK
  Sing("Any", 5); // OK
  Sing("Any", undefined); // OK
  Sing("Any", "1");
  // Error: Argument of type "1" is not assignable to
  // parameter of type 'number:undefined'.
  ```

##### 5.1.4 나머지 매개변수
- 자바스크립트의 일부 함수는 임의의 수의 인수로 호출할 수 있도록 만들어진다.
- 스프레드 연산자는 함수 선언의 마지막 매개변수에 위치하고, 해당 매개변수에서 시작해 함수에 전달된 나머지 인수가 모두 단일 배열에 저장되어야 함을 나타낸다.
  ```ts
  function Sing(song: string, ...list: number[]){
    console.log(song, list)
  } 

  Sing("Any", 1,2,3,4); // OK
  // "Any", [1,2,3,4]
  Sing("Any"); // OK
  // "Any", []
  Sing("Any", "1");
  // Error: Argument of type "string" is not assignable to parameter of
  // typer "number"
  ```


#### 5.2 반환 타입
- 함수에 다른 값을 가진 여러 개의 반환문을 포함하고 있다면, 타입스크립트는 반환 타입을 가능한 모든 반환 타입의 조합으로 유추한다.
  ```ts
  function Sing(song: string[], index: number){
    return index < song.length ? song[index] : undefined;
  }
  // 타입: song: string[], index: number => string|undefined
  ```

##### 5.2.1 명시적 반환 타입
- 변수와 마찬가지로 타입 애너테이션을 사용해 함수의 반환 타입을 명시적으로 선언하지 않는 것이 좋다.
- 함수에서 반환 타입을 명시적으로 선언하는 방식이 유용할 때도 종종 있다.
  - 가능한 반환값이 많은 함수가 항상 동일한 타입의 값을 반환하도록 강제한다.
  - 타입스크립트는 재귀 함수의 반환 타입을 통해 타입을 유추하는 것을 거부한다.
  - 수백 개 이상의 타입스크립트 파일이 있는 매우 큰 프로젝트에서 타입스크립트 타입 검사 속도를 높일 수 있다.
- 함수 선언 반환 타입 애너테이션은 매개변수 목록이 끝나는 `)` 다음에 배치되며, 함수 선언의 경우 `{`앞에 배치된다.
  ```ts
  function Sing(songs: string[], count = 0): number {
    return songs.length ? Sing(songs.slice(1), count + 1) : count;
  }
  // 화살표 함수의 경우
  const Sing = (songs: string[], count = 0): number =>
    songs.length ? Sing(songs.slice(1), count + 1) : count;
  ```


- 함수의 반환 타입으로 할당할 수 없는 값을 반환하는 경우 타입스크립트는 할당 가능성 오류를 표시한다.
  ```ts
  function SongDate(song: string):
  Date | undefined {
    switch (song){
        case "Strange Fruit" :
            return new Date("April 20, 1939"); // OK

        case "Greensleeves" :
            return "unknown";
            // Error Type "string" is not assignable to type "Date".

        default :
            return undefined; // OK
    }
  }
  ```

#### 5.3 함수 타입
- 함수를 값으로 전달할 수 있으며, 함수를 가지기 위한 매개변수 또는 변수의 타입을 선언하는 방법이 필요하다.
- 함수 타입 구문은 화살표 함수와 유사하지만 함수 본문 대신 타입이 있다.
  ```ts
  let nothing: () => string;
  // 매개변수가 없고 string 타입을 반환한다.

  let input: (song: string[], count?: number) => number;
  // string[]매개변수와 count 선택적 매개변수 및 number 값을 반환하는 함수임을 설명한다.

  const songs = ["Juice", "Shake if Off", "What's up"];

  function runSing(getSongA: (index: number) => string {
    for(let i = 0; i < songs.length; i++){
        console.log(getSongA(i));
    }
  })
  function getSong(index: number){
    return `${songs[index]}`;
  }
  runSing(getSongA); // OK

  function logSong(song: string){
    return `${song}`;
  }

  runSing(logSong);
  // Error: Argument of type "(song: string) => string" in not
  // assignable to parameter of type "(index: number) => string".
  // Types of parameters "song" and "index" are incompatible.
  // Type "number" is not assignable to type "string".
  ```
  - 두 함수를 서로 할당할 수 없다는 오류를 출력할 때 타입스크립트는 일반적으로 세 가지 상세한 단계를 제공한다.
  - `runSing`에 대한 오류 메시지는 다음과 같은 내용을 담고 있다.
    - 첫 번째 들여쓰기 단계는 두 함수 타입을 출력한다.
    - 다음 들여쓰기 단계는 일치하지 않는 부분을 지정한다.
    - 마지막 들여쓰기 단계는 일치하지 않는 부분에 대한 정확한 할당 가능성 오류를 출력한다.
  - 단계별로 제공하는 내용은 다음과 같다.
    - logSong: (song: string) => string은 getSongA: (index: number) => string에 할당되도록 제공된 타입이다.
    - logSong의 song 매개변수는 getSongA의 index 매개변수로 할당됩니다.
    - song의 string 타입은 index의 number타입에 할당할 수 없다.


##### 5.3.1 함수 타입 괄호
- 함수 타입은 다른 타입이 사용되는 모든 곳에 배치할 수 있다.
- 유니언 타입도 포함된다.
- 유니언 타입의 애너테이션에서 함수 반환 위치를 나타내거나 유니언 타입을 감싸는 부분을 표시할 때 괄호를 사용한다.
  ```ts
  let returnString: () => string| undefined;
  // 타입은 stirng | undefined 유니언을 반환하는 함수이다.
  let maybeReturnString: () => string| undefined;
  // 타입은 undefined나 string을 반환하는 함수이다.
  ```

##### 5.3.2 매개변수 타입 추론
- 타입스크립트는 선언된 타입의 위치에 제공된 함수의 매개변수 타입을 유차할 수 있다.
  ```ts
  let singer: (song: string) => string;

  singer = function (song){
    return `Singing: ${song.toUpperCase()}`; // OK
    // song: string 타입
  }
  ```

